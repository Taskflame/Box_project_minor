–í–æ—Ç –≥–æ—Ç–æ–≤—ã–π **README.md**, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ **–Ω–∞ –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö** –∏ **—Ä–∞–±–æ—Ç—É —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–∏–¥–µ–æ**. –ú–æ–∂–Ω–æ –ø—Ä—è–º–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

---

# üì¶ Blue Box 3D Reconstruction (SfM + Visual Hull)

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è **3D-–º–æ–¥–µ–ª–∏ —Å–∏–Ω–µ–π –∫–æ—Ä–æ–±–∫–∏** –∏–∑ –≤–∏–¥–µ–æ –∏–ª–∏ –Ω–∞–±–æ—Ä–∞ –∫–∞–¥—Ä–æ–≤.
–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ—Ç–æ–¥—ã **Structure-from-Motion (SfM)**, **–º–∞—Å–∫–∏ –ø–æ —Ü–≤–µ—Ç—É** –∏ **Visual Hull (space carving)**.

–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ **—Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö**, —Å **—Ä–∞–∑–Ω—ã–º–∏ –≤–∏–¥–µ–æ**, –±–µ–∑ –∂—ë—Å—Ç–∫–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –æ–¥–Ω–æ–º—É –æ–∫—Ä—É–∂–µ–Ω–∏—é.

---

## üß† –ò–¥–µ—è –ø–∞–π–ø–ª–∞–π–Ω–∞

1. üé• –í–∏–¥–µ–æ ‚Üí –∫–∞–¥—Ä—ã
2. üîµ –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Å–æ–∫ —Å–∏–Ω–µ–π –∫–æ—Ä–æ–±–∫–∏
3. üì∑ SfM (—á–µ—Ä–µ–∑ COLMAP) ‚Äî –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä
4. üßä Visual Hull ‚Äî –≤–æ–∫—Å–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å–∏–ª—É—ç—Ç–æ–≤
5. üß± Mesh + —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ + –æ–∫—Ä–∞—Å–∫–∞
6. üëÄ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ Open3D

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
Box_project_minor/
‚îÇ
‚îú‚îÄ‚îÄ main_box.py                 # –ë—ã—Å—Ç—Ä—ã–π SfM + point cloud –∏–∑ –≤–∏–¥–µ–æ
‚îú‚îÄ‚îÄ make_masks_box.py           # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –º–∞—Å–æ–∫ –∫–æ—Ä–æ–±–∫–∏
‚îú‚îÄ‚îÄ visual_hull_from_masks.py   # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–ª–æ—Ç–Ω–æ–π 3D-–º–æ–¥–µ–ª–∏ (Visual Hull)
‚îÇ
‚îú‚îÄ‚îÄ frames/                     # –ö–∞–¥—Ä—ã –∏–∑ –≤–∏–¥–µ–æ (JPEG)
‚îú‚îÄ‚îÄ masks/                      # –ú–∞—Å–∫–∏ –∫–æ—Ä–æ–±–∫–∏ (PNG/JPEG)
‚îÇ
‚îú‚îÄ‚îÄ colmap_images/
‚îÇ   ‚îî‚îÄ‚îÄ images/                 # Undistorted –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ COLMAP
‚îÇ
‚îú‚îÄ‚îÄ colmap_text/                # cameras.txt / images.txt / points3D.txt
‚îÇ
‚îú‚îÄ‚îÄ output/
‚îÇ   ‚îú‚îÄ‚îÄ box_sfm_color.ply
‚îÇ   ‚îî‚îÄ‚îÄ box_visual_hull.ply
‚îÇ
‚îî‚îÄ‚îÄ README.md
```

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Python

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è **Python 3.9‚Äì3.11**

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

```bash
pip install numpy opencv-python open3d scikit-image
```

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å ORB –≤–º–µ—Å—Ç–æ SIFT ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

---

## üé• –†–∞–±–æ—Ç–∞ —Å –¥—Ä—É–≥–∏–º –≤–∏–¥–µ–æ

### 1Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤—å –≤–∏–¥–µ–æ

–ü–æ–ª–æ–∂–∏ –≤–∏–¥–µ–æ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ —É–∫–∞–∂–∏ –ø—É—Ç—å:

```python
VIDEO_PATH = "my_video.mp4"
```

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è:

* `.mp4`
* `.mov`
* `.avi`

---

### 2Ô∏è‚É£ –ó–∞–ø—É—Å–∫ `main_box.py` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
python main_box.py
```

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

* —á–∏—Ç–∞–µ—Ç –≤–∏–¥–µ–æ
* –∏—â–µ—Ç —Ñ–∏—á–∏ (SIFT / ORB)
* —Ç—Ä–∏–∞–Ω–≥—É–ª–∏—Ä—É–µ—Ç —Ç–æ—á–∫–∏
* —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±–ª–∞–∫–æ —Ç–æ—á–µ–∫:

```text
output/box_sfm_color.ply
```

> ‚ö†Ô∏è –≠—Ç–æ—Ç —à–∞–≥ **–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω**, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å COLMAP –æ—Ç–¥–µ–ª—å–Ω–æ.

---

## üì∑ COLMAP (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è Visual Hull)

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã `visual_hull_from_masks.py` —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç COLMAP:

```text
colmap_text/
 ‚îú‚îÄ‚îÄ cameras.txt
 ‚îú‚îÄ‚îÄ images.txt
 ‚îî‚îÄ‚îÄ points3D.txt
```

–ê —Ç–∞–∫–∂–µ undistorted –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

```text
colmap_images/images/
```

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —à–∞–≥–∏ –≤ COLMAP:

1. Feature Extraction
2. Feature Matching
3. Sparse Reconstruction
4. Image Undistortion
5. Export model as **TXT**

---

## üîµ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Å–æ–∫ –∫–æ—Ä–æ–±–∫–∏

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:

```text
frames/
 ‚îú‚îÄ‚îÄ frame_0001.jpg
 ‚îú‚îÄ‚îÄ frame_0002.jpg
 ‚îî‚îÄ‚îÄ ...
```

–ó–∞–ø—É—Å–∫:

```bash
python make_masks_box.py
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

```text
masks/
 ‚îú‚îÄ‚îÄ frame_0001.jpg
 ‚îú‚îÄ‚îÄ frame_0002.jpg
 ‚îî‚îÄ‚îÄ ...
```

–ú–∞—Å–∫–∏ —Å—Ç—Ä–æ—è—Ç—Å—è:

* –ø–æ HSV-—Ü–≤–µ—Ç—É (—Å–∏–Ω–∏–π)
* —Å –∑–∞–ª–∏–≤–∫–æ–π –∫–æ–Ω—Ç—É—Ä–æ–≤
* –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ–º

---

## üßä –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ 3D-–º–æ–¥–µ–ª–∏ (Visual Hull)

```bash
python visual_hull_from_masks.py
```

–°–∫—Ä–∏–ø—Ç:

* —á–∏—Ç–∞–µ—Ç –∫–∞–º–µ—Ä—ã COLMAP
* —Å—Ç—Ä–æ–∏—Ç –≤–æ–∫—Å–µ–ª—å–Ω—É—é —Å–µ—Ç–∫—É
* –≤—ã–ø–æ–ª–Ω—è–µ—Ç **space carving**
* –ø—Ä–∏–º–µ–Ω—è–µ—Ç **Marching Cubes**
* —Å–≥–ª–∞–∂–∏–≤–∞–µ—Ç mesh
* –æ–∫—Ä–∞—à–∏–≤–∞–µ—Ç –≤–µ—Ä—à–∏–Ω—ã –ø–æ –∫–∞–¥—Ä–∞–º

–†–µ–∑—É–ª—å—Ç–∞—Ç:

```text
output/box_visual_hull.ply
```

---

## üëÄ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –æ–∫–Ω–µ Open3D
–∏–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
open3d output/box_visual_hull.ply
```

---

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### `visual_hull_from_masks.py`

```python
VOX_RES = 640          # –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ (256‚Äì640)
MIN_VIEWS = 3          # —Å–∫–æ–ª—å–∫–æ –∫–∞–º–µ—Ä –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –≤–æ–∫—Å–µ–ª—å
SMOOTH_ITERS = 5       # —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
PAD_SCALE = 0.15       # –∑–∞–ø–∞—Å –≤–æ–∫—Ä—É–≥ –æ–±—ä–µ–∫—Ç–∞
```

### `main_box.py`

```python
FRAME_STRIDE = 2       # –ø—Ä–æ–ø—É—Å–∫ –∫–∞–¥—Ä–æ–≤
DOWNSCALE = 0.6        # —É—Å–∫–æ—Ä–µ–Ω–∏–µ
FOV_DEG = 70.0         # —É–≥–æ–ª –æ–±–∑–æ—Ä–∞ –∫–∞–º–µ—Ä—ã
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ú–æ–¥–µ–ª—å –ø—É—Å—Ç–∞—è**

* –ø–ª–æ—Ö–∏–µ –º–∞—Å–∫–∏
* –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤
* –º–∞–ª–æ –∫–∞–º–µ—Ä –≤ COLMAP

**–ö—É–± —Å–ª–∏—à–∫–æ–º –≥—Ä—É–±—ã–π**

* —É–≤–µ–ª–∏—á—å `VOX_RES`
* –¥–æ–±–∞–≤—å –∫–∞–¥—Ä–æ–≤

**–¶–≤–µ—Ç–∞ —Å–µ—Ä—ã–µ**

* –æ–±—ä–µ–∫—Ç –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –º–∞—Å–∫–∏
* —É–≤–µ–ª–∏—á—å `MAX_COLOR_VIEWS`

---

## üöÄ –î–ª—è —á–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç

* Computer Vision / CV-–ø—Ä–æ–µ–∫—Ç—ã
* 3D-—Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
* –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ SfM + Visual Hull
* –ü—Ä–æ—Ç–æ—Ç–∏–ø—ã –¥–ª—è Digital Twin / BIM

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –¥–∞–ª—å—à–µ –º–æ–≥—É:

* ‚ú® —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–∞–π–ø–ª–∞–π–Ω
* üì¶ —Å–¥–µ–ª–∞—Ç—å Docker
* üìÑ –¥–æ–±–∞–≤–∏—Ç—å —Å—Ö–µ–º—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
* üéØ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ **–ª—é–±–æ–π —Ü–≤–µ—Ç / –æ–±—ä–µ–∫—Ç**

–ü—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏ üëç
